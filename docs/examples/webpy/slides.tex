\documentclass{beamer}
\usepackage[latin1]{inputenc}

\usepackage{fancyvrb}
\usepackage{../pastie}

\usetheme{Pittsburgh}
\title[Refreshing Docs]{Refreshing Documentation\\An Introduction to Dexy}
\author{Ana Nelson}
\institute{dexy.it}
\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}{Dexy for Web Apps}
\begin{itemize}
\item{Install Guide}
\pause
\item{User Guide}
\pause
\item{Developer Docs}
\end{itemize}
\end{frame}

\begin{frame}{The Big Idea}
No Dead Code
\begin{itemize}
\item{Any code you show comes from a live, runnable file.}
\item{Any images or output you show comes from running live code.}
\end{itemize}
\end{frame}

\begin{frame}{Benefits}
\begin{itemize}
\item{Correctness}
\item{Maintainability}
\item{Workflow}
\end{itemize}
\end{frame}

\begin{frame}{Tool for the job}
Dexy
\begin{itemize}
\item{Open Source (mostly MIT, some AGPL)}
\item{Written in Python}
\item{Command Line, Text Based}
\item{* Agnostic}
\item{My Day Job and my Mission in Life}
\end{itemize}
\end{frame}

\begin{frame}{Demo}
What we want to create:
\begin{itemize}
\item{Install Guide}
\item{User Guide}
\item{Developer Docs}
\end{itemize}

What we need:
\begin{itemize}
\item{An App!}
\item{Install Script}
\item{Watir Script}
\end{itemize}
\end{frame}

\begin{frame}{An App}
web.py todo list app
http://webpy.org/src/todo-list/0.3
\end{frame}

\begin{frame}[fragile]{DB Schema}
<< d['schema.sql|pyg|l'] >>
\end{frame}

\footnotesize

\begin{frame}[fragile]{model.py}
<< d['model.py|pyg|l'] >>
\end{frame}

\begin{frame}[fragile]{base.html}
<< d['templates/base.html|pyg|l'] >>
\end{frame}

\begin{frame}[fragile]{index.html}
\scriptsize
<< d['templates/index.html|pyg|l'] >>
\footnotesize
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['top'] >>
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['index-class'] >>
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['index-get'] >>
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['index-post'] >>
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['delete-class'] >>
\end{frame}

\begin{frame}[fragile]{todo.py}
<< d['todo.py|idio|l']['app'] >>
\end{frame}

\begin{frame}[fragile]{install script}
Install Script
\end{frame}


\begin{frame}[fragile]{install script}
<< d['ubuntu-install.sh|idio|l']['update-package-manager'] >>
<< d['ubuntu-install.sh|idio|l']['install'] >>
\end{frame}

\begin{frame}[fragile]{install script}
<< d['ubuntu-install.sh|idio|l']['get-code'] >>
<< d['ubuntu-install.sh|idio|l']['init-db'] >>
<< d['ubuntu-install.sh|idio|l']['start-server'] >>
\end{frame}

\begin{frame}[fragile]{install script}
<< d['run-ubuntu-install.sh|pyg|l'] >>
\normalsize
(Make sure to allow access to port 8080 in security group.)
\end{frame}

\begin{frame}{Now What}
\begin{itemize}
\item{We have an app and we have it running.}
\item{We have an install script which we can use to create an install guide.}
\item{Now we need a script to show how the app works.}
\end{itemize}
\end{frame}

\begin{frame}{Watir}
\begin{itemize}
\item{Watir lets us automate the web browser}
\item{Can be integrated with functional tests}
\item{For extra awesomeness, let's use Watir to take screenshots}
\end{itemize}
\includegraphics[width=2in]{dexy--index.png}
\end{frame}

\begin{frame}[fragile]{watir}
\scriptsize
<< d['demo.rb|idio|l']['requires'] >>
<< d['demo.rb|idio|l']['constants'] >>
\end{frame}

\begin{frame}[fragile]{watir}
\normalsize
We create a reference to the browser:
\scriptsize
<< d['demo.rb|idio|l']['init-safari'] >>

\normalsize
And define a helper method to take screenshots:
\scriptsize
<< d['demo.rb|idio|l']['def-screenshot'] >>
\end{frame}

\begin{frame}[fragile]{watir}
\normalsize
Now we're ready to go!
\scriptsize
<< d['demo.rb|idio|l']['goto-index'] >>
\includegraphics[width=3in]{dexy--index.png}
\end{frame}

\begin{frame}[fragile]{watir}
\normalsize
Let's enter a TODO:
\scriptsize
<< d['demo.rb|idio|l']['enter-text'] >>
\includegraphics[width=3in]{dexy--enter.png}
\end{frame}

\begin{frame}[fragile]{watir}
Click the "Add todo" button to add it. We'll verify that it was actually added.
\scriptsize
<< d['demo.rb|idio|l']['add-todo'] >>
\includegraphics[width=3in]{dexy--add.png}
\end{frame}

\begin{frame}[fragile]{watir}
\normalsize
And delete it again:
\scriptsize
<< d['demo.rb|idio|l']['delete-todo'] >>
\includegraphics[width=3in]{dexy--delete.png}
\end{frame}

\begin{frame}{}
\begin{itemize}
\item{Now we have screenshots we can use in our documentation, and which we can update any time.}
\item{We also know that the steps described in our screenshots WORK.}
\item{Note that we are also validating our install script.}
\item{You will want to return your DB to its original state within your script, or have a reset method in your app.}
\end{itemize}
\end{frame}

\end{document}

